---
title: "intRo 4"
subtitle: "Modeling"
author: "Billy Fryer"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```
# Introduction

One super important thing that one needs to be able to do when looking at data is to be able to create some sort of model from it. There a a tons of ways and methods to do so depending on what you want to do. At NC State, there is a class entitled Introduction to Regression Analysis (ST 430) that is a requirement for Statistics majors that explores this topic more in depth. In this tutorial, we will go over the basics of fitting Least Squares Regression models.

# Least Squares Regression Models

When one thinks of Regression, they typically think of Least Squares Regression. This minimizes the sum of square errors (SSE). We will do an example of this using data from the Lahman Data Sets.

## Idea

Can we model the number of wins a team has based on the number of Home Runs, hit that season?

## Data Manipulation

Data Manipulation is always one of the lengthiest things in creating models. We will manipulate the data using functions covered in previous tutorials in the Tidyverse Package.

```{r data maniputlation}
# Import Data Sets
library(Lahman)
library(tidyverse)

# Only Select variables we want
teams <- Teams %>% select(yearID, name, W, L, HR, G) 

# To keep our analysis consistent, we only included teams that played 
# a full 162 game season (>= due to playoffs) since the 
# 162 game schedule was instated in 1961.

# We then got reordered columns and got rid of unnecessary columns
teams <- teams  %>% 
         filter(G >= 162 & yearID >= 1961 & yearID <= 2019) %>% 
         select(name, everything()) %>% 
         select(-G)
```

## Factor Variables

What if we have a variable that is more qualitative that quantitative? For example, in a different scenario, using a player's position could be quite useful in an analysis. This is where factor variable come into play.

In our problem, we want to use years as a factor variable.

```{r factors}
teams$yearID <- as.factor(teams$yearID)
```

## Creating the Model

Creating a linear model is actually relatively simple:

```{r LSR}
# Fit First Order Linear Models
lsrModel <- lm(W ~ HR, data = teams)
```

As you can see, the variable to the left of the tilde (~) is the one that we want to be predicting, while the variables on the right are our predictors. Then we need to specify what data set we are fitting the model from. If we wanted to use multiple predictors, we would do so using a + between predictors.

\newpage

## Exploring Results

```{r LSR results ggplot}
# Plotting using ggplot
ggplot(teams, aes(x = HR, y = W)) +
  geom_point() +
  stat_smooth(method = "lm", color = "red")
```

\newpage

```{r LSR results Base R}
# Plotting in Base R
plot(teams$HR, teams$W)
abline(lsrModel, col = "red")
```

# Conclusion

There are of course tons of different ways to fit models such as Logistic Regression Models or some that even involve Machine Learning Techniques. For more information, look up the package `tidymodels` to learn more.